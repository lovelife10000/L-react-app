"use strict";!function(t){t.tablesort=function(a,e){var s=this;this.$table=a,this.$thead=this.$table.find("thead"),this.settings=t.extend({},t.tablesort.defaults,e),this.$sortCells=this.$thead.length>0?this.$thead.find("th:not(.no-sort)"):this.$table.find("th:not(.no-sort)"),this.$sortCells.on("click.tablesort",function(){s.sort(t(this))}),this.index=null,this.$th=null,this.direction=null},t.tablesort.prototype={sort:function(a,e){var s=new Date,i=this,n=this.$table,o=n.find("tbody").length>0?n.find("tbody"):n,r=o.find("tr").has("td, th"),l=r.find(":nth-child("+(a.index()+1)+")").filter("td, th"),c=a.data().sortBy,d=[],u=l.map(function(e,s){return c?"function"==typeof c?c(t(a),t(s),i):c:null!=t(this).data().sortValue?t(this).data().sortValue:t(this).text()});0!==u.length&&(this.index!==a.index()?(this.direction="asc",this.index=a.index()):"asc"!==e&&"desc"!==e?this.direction="asc"===this.direction?"desc":"asc":this.direction=e,e="asc"==this.direction?1:-1,i.$table.trigger("tablesort:start",[i]),i.log("Sorting by "+this.index+" "+this.direction),i.$table.css("display"),setTimeout(function(){i.$sortCells.removeClass(i.settings.asc+" "+i.settings.desc);for(var n=0,c=u.length;n<c;n++)d.push({index:n,cell:l[n],row:r[n],value:u[n]});d.sort(function(t,a){return i.settings.compare(t.value,a.value)*e}),t.each(d,function(t,a){o.append(a.row)}),a.addClass(i.settings[i.direction]),i.log("Sort finished in "+((new Date).getTime()-s.getTime())+"ms"),i.$table.trigger("tablesort:complete",[i]),i.$table.css("display")},u.length>2e3?200:10))},log:function(a){(t.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+a)},destroy:function(){return this.$sortCells.off("click.tablesort"),this.$table.data("tablesort",null),null}},t.tablesort.DEBUG=!1,t.tablesort.defaults={debug:t.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending",compare:function(t,a){return t>a?1:t<a?-1:0}},t.fn.tablesort=function(a){var e,s;return this.each(function(){e=t(this),s=e.data("tablesort"),s&&s.destroy(),e.data("tablesort",new t.tablesort(e,a))})}}(window.Zepto||window.jQuery),!function(t){t.fn.slide=function(a){return t.fn.slide.defaults={type:"slide",effect:"fade",autoPlay:!1,delayTime:500,interTime:2500,triggerTime:150,defaultIndex:0,titCell:".hd li",mainCell:".bd",targetCell:null,trigger:"mouseover",scroll:1,vis:1,titOnClassName:"on",autoPage:!1,prevCell:".prev",nextCell:".next",pageStateCell:".pageState",opp:!1,pnLoop:!0,easing:"swing",startFun:null,endFun:null,switchLoad:null,playStateCell:".playState",mouseOverStop:!0,defaultPlay:!0,returnDefault:!1},this.each(function(){var e=t.extend({},t.fn.slide.defaults,a),s=t(this),i=e.effect,n=t(e.prevCell,s),o=t(e.nextCell,s),r=t(e.pageStateCell,s),l=t(e.playStateCell,s),c=t(e.titCell,s),d=c.size(),u=t(e.mainCell,s),p=u.children().size(),v=e.switchLoad,m=t(e.targetCell,s),h=parseInt(e.defaultIndex),f=parseInt(e.delayTime),g=parseInt(e.interTime);parseInt(e.triggerTime);var b,y=parseInt(e.scroll),w=parseInt(e.vis),C="false"!=e.autoPlay&&0!=e.autoPlay,_="false"!=e.opp&&0!=e.opp,x="false"!=e.autoPage&&0!=e.autoPage,k="false"!=e.pnLoop&&0!=e.pnLoop,j="false"!=e.mouseOverStop&&0!=e.mouseOverStop,T="false"!=e.defaultPlay&&0!=e.defaultPlay,E="false"!=e.returnDefault&&0!=e.returnDefault,P=0,I=0,S=0,D=0,O=e.easing,R=null,U=null,M=null,B=e.titOnClassName,A=c.index(s.find("."+B)),z=h=-1==A?h:A,Q=h,q=h,N=p>=w?0!=p%y?p%y:y:0,L="leftMarquee"==i||"topMarquee"==i,$=function(){t.isFunction(e.startFun)&&e.startFun(h,d,s,t(e.titCell,s),u,m,n,o)},G=function(){t.isFunction(e.endFun)&&e.endFun(h,d,s,t(e.titCell,s),u,m,n,o)},W=function(){c.removeClass(B),T&&c.eq(Q).addClass(B)};if("menu"==e.type)return T&&c.removeClass(B).eq(h).addClass(B),c.hover(function(){b=t(this).find(e.targetCell);var a=c.index(t(this));U=setTimeout(function(){switch(h=a,c.removeClass(B).eq(h).addClass(B),$(),i){case"fade":b.stop(!0,!0).animate({opacity:"show"},f,O,G);break;case"slideDown":b.stop(!0,!0).animate({height:"show"},f,O,G)}},e.triggerTime)},function(){switch(clearTimeout(U),i){case"fade":b.animate({opacity:"hide"},f,O);break;case"slideDown":b.animate({height:"hide"},f,O)}}),void(E&&s.hover(function(){clearTimeout(M)},function(){M=setTimeout(W,f)}));if(0==d&&(d=p),L&&(d=2),x){if(p>=w)if("leftLoop"==i||"topLoop"==i)d=0!=p%y?(0^p/y)+1:p/y;else{var F=p-w;d=1+parseInt(0!=F%y?F/y+1:F/y),0>=d&&(d=1)}else d=1;c.html("");var H="";if(1==e.autoPage||"true"==e.autoPage)for(var Z=0;d>Z;Z++)H+="<li>"+(Z+1)+"</li>";else for(var Z=0;d>Z;Z++)H+=e.autoPage.replace("$",Z+1);c.html(H);var c=c.children()}if(p>=w){u.children().each(function(){t(this).width()>S&&(S=t(this).width(),I=t(this).outerWidth(!0)),t(this).height()>D&&(D=t(this).height(),P=t(this).outerHeight(!0))});var X=u.children(),V=function(){for(var t=0;w>t;t++)X.eq(t).clone().addClass("clone").appendTo(u);for(var t=0;N>t;t++)X.eq(p-t-1).clone().addClass("clone").prependTo(u)};switch(i){case"fold":u.css({position:"relative",width:I,height:P}).children().css({position:"absolute",width:S,left:0,top:0,display:"none"});break;case"top":u.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; height:'+w*P+'px"></div>').css({top:-(h*y)*P,position:"relative",padding:"0",margin:"0"}).children().css({height:D});break;case"left":u.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; width:'+w*I+'px"></div>').css({width:p*I,left:-(h*y)*I,position:"relative",overflow:"hidden",padding:"0",margin:"0"}).children().css({float:"left",width:S});break;case"leftLoop":case"leftMarquee":V(),u.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; width:'+w*I+'px"></div>').css({width:(p+w+N)*I,position:"relative",overflow:"hidden",padding:"0",margin:"0",left:-(N+h*y)*I}).children().css({float:"left",width:S});break;case"topLoop":case"topMarquee":V(),u.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; height:'+w*P+'px"></div>').css({height:(p+w+N)*P,position:"relative",padding:"0",margin:"0",top:-(N+h*y)*P}).children().css({height:D})}}var Y=function(t){var a=t*y;return t==d?a=p:-1==t&&0!=p%y&&(a=-p%y),a},K=function(a){var e=function(e){for(var s=e;w+e>s;s++)a.eq(s).find("img["+v+"]").each(function(){var a=t(this);if(a.attr("src",a.attr(v)).removeAttr(v),u.find(".clone")[0])for(var e=u.children(),s=0;s<e.size();s++)e.eq(s).find("img["+v+"]").each(function(){t(this).attr(v)==a.attr("src")&&t(this).attr("src",t(this).attr(v)).removeAttr(v)})})};switch(i){case"fade":case"fold":case"top":case"left":case"slideDown":e(h*y);break;case"leftLoop":case"topLoop":e(N+Y(q));break;case"leftMarquee":case"topMarquee":var s="leftMarquee"==i?u.css("left").replace("px",""):u.css("top").replace("px",""),n="leftMarquee"==i?I:P,o=N;if(0!=s%n){var r=Math.abs(0^s/n);o=1==h?N+r:N+r-1}e(o)}},J=function(t){if(!T||z!=h||t||L){if(L?h>=1?h=1:0>=h&&(h=0):(q=h,h>=d?h=0:0>h&&(h=d-1)),$(),null!=v&&K(u.children()),m[0]&&(b=m.eq(h),null!=v&&K(m),"slideDown"==i?(m.not(b).stop(!0,!0).slideUp(f),b.slideDown(f,O,function(){u[0]||G()})):(m.not(b).stop(!0,!0).hide(),b.animate({opacity:"show"},f,function(){u[0]||G()}))),p>=w)switch(i){case"fade":u.children().stop(!0,!0).eq(h).animate({opacity:"show"},f,O,function(){G()}).siblings().hide();break;case"fold":u.children().stop(!0,!0).eq(h).animate({opacity:"show"},f,O,function(){G()}).siblings().animate({opacity:"hide"},f,O);break;case"top":u.stop(!0,!1).animate({top:-h*y*P},f,O,function(){G()});break;case"left":u.stop(!0,!1).animate({left:-h*y*I},f,O,function(){G()});break;case"leftLoop":var a=q;u.stop(!0,!0).animate({left:-(Y(q)+N)*I},f,O,function(){-1>=a?u.css("left",-(N+(d-1)*y)*I):a>=d&&u.css("left",-N*I),G()});break;case"topLoop":var a=q;u.stop(!0,!0).animate({top:-(Y(q)+N)*P},f,O,function(){-1>=a?u.css("top",-(N+(d-1)*y)*P):a>=d&&u.css("top",-N*P),G()});break;case"leftMarquee":var e=u.css("left").replace("px","");0==h?u.animate({left:++e},0,function(){u.css("left").replace("px","")>=0&&u.css("left",-p*I)}):u.animate({left:--e},0,function(){u.css("left").replace("px","")<=-(p+N)*I&&u.css("left",-N*I)});break;case"topMarquee":var s=u.css("top").replace("px","");0==h?u.animate({top:++s},0,function(){u.css("top").replace("px","")>=0&&u.css("top",-p*P)}):u.animate({top:--s},0,function(){u.css("top").replace("px","")<=-(p+N)*P&&u.css("top",-N*P)})}c.removeClass(B).eq(h).addClass(B),z=h,k||(o.removeClass("nextStop"),n.removeClass("prevStop"),0==h&&n.addClass("prevStop"),h==d-1&&o.addClass("nextStop")),r.html("<span>"+(h+1)+"</span>/"+d)}};T&&J(!0),E&&s.hover(function(){clearTimeout(M)},function(){M=setTimeout(function(){h=Q,T?J():"slideDown"==i?b.slideUp(f,W):b.animate({opacity:"hide"},f,W),z=h},300)});var tt=function(t){R=setInterval(function(){_?h--:h++,J()},t?t:g)},at=function(t){R=setInterval(J,t?t:g)},et=function(){j||(clearInterval(R),tt())},st=function(){(k||h!=d-1)&&(h++,J(),L||et())},it=function(){(k||0!=h)&&(h--,J(),L||et())},nt=function(){clearInterval(R),L?at():tt(),l.removeClass("pauseState")},ot=function(){clearInterval(R),l.addClass("pauseState")};if(C?L?(_?h--:h++,at(),j&&u.hover(ot,nt)):(tt(),j&&s.hover(ot,nt)):(L&&(_?h--:h++),l.addClass("pauseState")),l.click(function(){l.hasClass("pauseState")?nt():ot()}),"mouseover"==e.trigger?c.hover(function(){var t=c.index(this);U=setTimeout(function(){h=t,J(),et()},e.triggerTime)},function(){clearTimeout(U)}):c.click(function(){h=c.index(this),J(),et()}),L){if(o.mousedown(st),n.mousedown(it),k){var rt,lt=function(){rt=setTimeout(function(){clearInterval(R),at(0^g/10)},150)},ct=function(){clearTimeout(rt),clearInterval(R),at()};o.mousedown(lt),o.mouseup(ct),n.mousedown(lt),n.mouseup(ct)}"mouseover"==e.trigger&&(o.hover(st,function(){}),n.hover(it,function(){}))}else o.click(st),n.click(it)})}}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,a,e,s,i){return jQuery.easing[jQuery.easing.def](t,a,e,s,i)},easeInQuad:function(t,a,e,s,i){return s*(a/=i)*a+e},easeOutQuad:function(t,a,e,s,i){return-s*(a/=i)*(a-2)+e},easeInOutQuad:function(t,a,e,s,i){return(a/=i/2)<1?s/2*a*a+e:-s/2*(--a*(a-2)-1)+e},easeInCubic:function(t,a,e,s,i){return s*(a/=i)*a*a+e},easeOutCubic:function(t,a,e,s,i){return s*((a=a/i-1)*a*a+1)+e},easeInOutCubic:function(t,a,e,s,i){return(a/=i/2)<1?s/2*a*a*a+e:s/2*((a-=2)*a*a+2)+e},easeInQuart:function(t,a,e,s,i){return s*(a/=i)*a*a*a+e},easeOutQuart:function(t,a,e,s,i){return-s*((a=a/i-1)*a*a*a-1)+e},easeInOutQuart:function(t,a,e,s,i){return(a/=i/2)<1?s/2*a*a*a*a+e:-s/2*((a-=2)*a*a*a-2)+e},easeInQuint:function(t,a,e,s,i){return s*(a/=i)*a*a*a*a+e},easeOutQuint:function(t,a,e,s,i){return s*((a=a/i-1)*a*a*a*a+1)+e},easeInOutQuint:function(t,a,e,s,i){return(a/=i/2)<1?s/2*a*a*a*a*a+e:s/2*((a-=2)*a*a*a*a+2)+e},easeInSine:function(t,a,e,s,i){return-s*Math.cos(a/i*(Math.PI/2))+s+e},easeOutSine:function(t,a,e,s,i){return s*Math.sin(a/i*(Math.PI/2))+e},easeInOutSine:function(t,a,e,s,i){return-s/2*(Math.cos(Math.PI*a/i)-1)+e},easeInExpo:function(t,a,e,s,i){return 0==a?e:s*Math.pow(2,10*(a/i-1))+e},easeOutExpo:function(t,a,e,s,i){return a==i?e+s:s*(-Math.pow(2,-10*a/i)+1)+e},easeInOutExpo:function(t,a,e,s,i){return 0==a?e:a==i?e+s:(a/=i/2)<1?s/2*Math.pow(2,10*(a-1))+e:s/2*(-Math.pow(2,-10*--a)+2)+e},easeInCirc:function(t,a,e,s,i){return-s*(Math.sqrt(1-(a/=i)*a)-1)+e},easeOutCirc:function(t,a,e,s,i){return s*Math.sqrt(1-(a=a/i-1)*a)+e},easeInOutCirc:function(t,a,e,s,i){return(a/=i/2)<1?-s/2*(Math.sqrt(1-a*a)-1)+e:s/2*(Math.sqrt(1-(a-=2)*a)+1)+e},easeInElastic:function(t,a,e,s,i){var n=1.70158,o=0,r=s;if(0==a)return e;if(1==(a/=i))return e+s;if(o||(o=.3*i),r<Math.abs(s)){r=s;var n=o/4}else var n=o/(2*Math.PI)*Math.asin(s/r);return-(r*Math.pow(2,10*(a-=1))*Math.sin(2*(a*i-n)*Math.PI/o))+e},easeOutElastic:function(t,a,e,s,i){var n=1.70158,o=0,r=s;if(0==a)return e;if(1==(a/=i))return e+s;if(o||(o=.3*i),r<Math.abs(s)){r=s;var n=o/4}else var n=o/(2*Math.PI)*Math.asin(s/r);return r*Math.pow(2,-10*a)*Math.sin(2*(a*i-n)*Math.PI/o)+s+e},easeInOutElastic:function(t,a,e,s,i){var n=1.70158,o=0,r=s;if(0==a)return e;if(2==(a/=i/2))return e+s;if(o||(o=.3*i*1.5),r<Math.abs(s)){r=s;var n=o/4}else var n=o/(2*Math.PI)*Math.asin(s/r);return 1>a?-.5*r*Math.pow(2,10*(a-=1))*Math.sin(2*(a*i-n)*Math.PI/o)+e:.5*r*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*i-n)*Math.PI/o)+s+e},easeInBack:function(t,a,e,s,i,n){return void 0==n&&(n=1.70158),s*(a/=i)*a*((n+1)*a-n)+e},easeOutBack:function(t,a,e,s,i,n){return void 0==n&&(n=1.70158),s*((a=a/i-1)*a*((n+1)*a+n)+1)+e},easeInOutBack:function(t,a,e,s,i,n){return void 0==n&&(n=1.70158),(a/=i/2)<1?s/2*a*a*(((n*=1.525)+1)*a-n)+e:s/2*((a-=2)*a*(((n*=1.525)+1)*a+n)+2)+e},easeInBounce:function(t,a,e,s,i){return s-jQuery.easing.easeOutBounce(t,i-a,0,s,i)+e},easeOutBounce:function(t,a,e,s,i){return(a/=i)<1/2.75?7.5625*s*a*a+e:2/2.75>a?s*(7.5625*(a-=1.5/2.75)*a+.75)+e:2.5/2.75>a?s*(7.5625*(a-=2.25/2.75)*a+.9375)+e:s*(7.5625*(a-=2.625/2.75)*a+.984375)+e},easeInOutBounce:function(t,a,e,s,i){return i/2>a?.5*jQuery.easing.easeInBounce(t,2*a,0,s,i)+e:.5*jQuery.easing.easeOutBounce(t,2*a-i,0,s,i)+.5*s+e}}),+function(t){function a(){var t=document.createElement("bootstrap"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var e in a)if(void 0!==t.style[e])return{end:a[e]};return!1}t.fn.emulateTransitionEnd=function(a){var e=!1,s=this;t(this).one("bsTransitionEnd",function(){e=!0});var i=function(){e||t(s).trigger(t.support.transition.end)};return setTimeout(i,a),this},t(function(){t.support.transition=a(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(a){if(t(a.target).is(this))return a.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(t){function a(){this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null,this._$document=t(document),this._$window=t(window),this._$body=t(document.body),this._boundClick=t.proxy(this._clickHandler,this)}function e(a){this._fullHeight=this._fullWidth=this._overlay=this._targetImageWrap=null,this._targetImage=a,this._$body=t(document.body)}a.prototype.listen=function(){this._$body.on("click",'[data-action="zoom"]',t.proxy(this._zoom,this))},a.prototype._zoom=function(a){var s=a.target;if(s&&"IMG"==s.tagName&&!this._$body.hasClass("zoom-overlay-open"))return a.metaKey||a.ctrlKey?window.open(a.target.getAttribute("data-original")||a.target.src,"_blank"):void(s.width>=t(window).width()-e.OFFSET||(this._activeZoomClose(!0),this._activeZoom=new e(s),this._activeZoom.zoomImage(),this._$window.on("scroll.zoom",t.proxy(this._scrollHandler,this)),this._$document.on("keyup.zoom",t.proxy(this._keyHandler,this)),this._$document.on("touchstart.zoom",t.proxy(this._touchStart,this)),document.addEventListener?document.addEventListener("click",this._boundClick,!0):document.attachEvent("onclick",this._boundClick,!0),"bubbles"in a?a.bubbles&&a.stopPropagation():a.cancelBubble=!0))},a.prototype._activeZoomClose=function(t){this._activeZoom&&(t?this._activeZoom.dispose():this._activeZoom.close(),this._$window.off(".zoom"),this._$document.off(".zoom"),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null)},a.prototype._scrollHandler=function(a){null===this._initialScrollPosition&&(this._initialScrollPosition=t(window).scrollTop());var e=this._initialScrollPosition-t(window).scrollTop();Math.abs(e)>=40&&this._activeZoomClose()},a.prototype._keyHandler=function(t){27==t.keyCode&&this._activeZoomClose()},a.prototype._clickHandler=function(t){t.preventDefault?t.preventDefault():event.returnValue=!1,"bubbles"in t?t.bubbles&&t.stopPropagation():t.cancelBubble=!0,this._activeZoomClose()},a.prototype._touchStart=function(a){this._initialTouchPosition=a.touches[0].pageY,t(a.target).on("touchmove.zoom",t.proxy(this._touchMove,this))},a.prototype._touchMove=function(a){Math.abs(a.touches[0].pageY-this._initialTouchPosition)>10&&(this._activeZoomClose(),t(a.target).off("touchmove.zoom"))},e.OFFSET=80,e._MAX_WIDTH=2560,e._MAX_HEIGHT=4096,e.prototype.zoomImage=function(){var a=document.createElement("img");a.onload=t.proxy(function(){this._fullHeight=Number(a.height),this._fullWidth=Number(a.width),this._zoomOriginal()},this),a.src=this._targetImage.src},e.prototype._zoomOriginal=function(){this._targetImageWrap=document.createElement("div"),this._targetImageWrap.className="zoom-img-wrap",this._targetImage.parentNode.insertBefore(this._targetImageWrap,this._targetImage),this._targetImageWrap.appendChild(this._targetImage),t(this._targetImage).addClass("zoom-img").attr("data-action","zoom-out"),this._overlay=document.createElement("div"),this._overlay.className="zoom-overlay",document.body.appendChild(this._overlay),this._calculateZoom(),this._triggerAnimation()},e.prototype._calculateZoom=function(){this._targetImage.offsetWidth;var a=this._fullWidth,s=this._fullHeight,i=(t(window).scrollTop(),a/this._targetImage.width),n=t(window).height()-e.OFFSET,o=t(window).width()-e.OFFSET,r=a/s,l=o/n;a<o&&s<n?this._imgScaleFactor=i:r<l?this._imgScaleFactor=n/s*i:this._imgScaleFactor=o/a*i},e.prototype._triggerAnimation=function(){this._targetImage.offsetWidth;var a=t(this._targetImage).offset(),e=t(window).scrollTop(),s=e+t(window).height()/2,i=t(window).width()/2,n=a.top+this._targetImage.height/2,o=a.left+this._targetImage.width/2;this._translateY=s-n,this._translateX=i-o;var r="scale("+this._imgScaleFactor+")",l="translate("+this._translateX+"px, "+this._translateY+"px)";t.support.transition&&(l+=" translateZ(0)"),t(this._targetImage).css({"-webkit-transform":r,"-ms-transform":r,transform:r}),t(this._targetImageWrap).css({"-webkit-transform":l,"-ms-transform":l,transform:l}),this._$body.addClass("zoom-overlay-open")},e.prototype.close=function(){return this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning"),t(this._targetImage).css({"-webkit-transform":"","-ms-transform":"",transform:""}),t(this._targetImageWrap).css({"-webkit-transform":"","-ms-transform":"",transform:""}),t.support.transition?void t(this._targetImage).one(t.support.transition.end,t.proxy(this.dispose,this)).emulateTransitionEnd(300):this.dispose()},e.prototype.dispose=function(){this._targetImageWrap&&this._targetImageWrap.parentNode&&(t(this._targetImage).removeClass("zoom-img").attr("data-action","zoom"),this._targetImageWrap.parentNode.replaceChild(this._targetImage,this._targetImageWrap),this._overlay.parentNode.removeChild(this._overlay),this._$body.removeClass("zoom-overlay-transitioning"))},t(function(){(new a).listen()})}(jQuery),function(t){function a(a,e,s){i.append('<div class="popover popover--top popover--flexible popover--animated"><div class="popover-inner js-popover-inner">'+a+'</div><div class="popover-arrow " style="left: 49px;"></div></div>');var n=t(".popover").outerHeight();t(".popover").css({left:e-30,top:s-n+5,zIndex:1e3}).addClass("is-active"),t(".popover").bind("mouseover",function(t){t.stopPropagation(),clearInterval(c)}),t(document).bind("mouseover",function(){clearInterval(c),t(".popover").is(":visible")&&(c=setTimeout(function(){t(".popover").remove()},500))})}var e=jQuery("body"),s=(["toolbar=0,status=0,resizable=1,width=640,height=560,left=",(screen.width-640)/2,",top=",(screen.height-560)/2].join(""),t("#cancel-comment-reply-link"));s.text();t(document).on("submit",".comment-form",function(a){a.preventDefault();var s=t(this),i=s.data("post"),n=t(".respond-"+i),o=parseInt(t("#comments-"+i+" .comments-title span").html());return s.hasClass("is-active")?r("别提交太快:-)",!0):(e.addClass("is-loadingApp"),s.addClass("is-active"),void t.ajax({url:PURE.ajax_url,data:s.serialize()+"&action=ajax_comment&_wpnonce="+PURE.nonce,type:"POST",dataType:"json",success:function(a){if(500==a.status)r(a.data,!0),e.removeClass("is-loadingApp"),setTimeout(function(){s.removeClass("is-active")},3e3);else{var l=addComment,c=l.I("cancel-comment-reply-link"),d=l.I("wp-temp-form-div"),u=l.I(l.respondId),p=(l.I("comment_post_ID").value,l.I("comment_parent").value);if("0"!=p)var v='<li class="comment"><div class="comment-block"><div class="comment-info"><div class="comment-meta"><div class="comment-author">'+a.data.comment_author+'</div><div class="comment-time">'+a.data.comment_time+'</div></div></div><div class="comment-content">'+a.data.comment_text+"</div></div></li>";else var v='<li class="comment"><div class="comment-block"><div class="comment-info"><div class="comment-avatar">'+a.data.avatar+'</div><div class="comment-meta"><div class="comment-author">'+a.data.comment_author+'</div><div class="comment-time">'+a.data.comment_time+'</div></div></div><div class="comment-content">'+a.data.comment_text+"</div></div></li>";t("textarea").each(function(){this.value=""}),"0"!=p?n.parent().parent().hasClass("children")?n.parent().after(v):n.parent().find(".children").length?n.parent().find(".children").append(v):n.before('<ol class="children">'+v+"</ol>"):t(".comment-list-"+i).prepend(v),r('<i class="iconfont icon-sun"></i>提交成功'),e.removeClass("is-loadingApp"),t("#comments-"+i+" .comments-title span").html(o+1),setTimeout(function(){s.removeClass("is-active")},9e3),c.style.display="none",c.onclick=null,l.I("comment_parent").value="0",d&&u&&(d.parentNode.insertBefore(u,d),d.parentNode.removeChild(d))}}}))});var i=t("body"),n=function(){var a=t(".butterBar");a.length&&a.remove()},o="";window.clearButterbar=n;var r=function(t,a){n();var e=a?" butterBar--error":"";i.append('<div class="butterBar butterBar--center'+e+'"><p class="butterBar-message">'+t+"</p></div>"),setTimeout("clearButterbar()",3e3)},l=[];window.createButterbar=r;var c,d;t('[data-action="show-user-card"]').bind("mouseover",function(e){e.stopPropagation(),clearInterval(c),o&&o.abort();var s=t(this),i=s.offset().left,n=s.offset().top,r=s.data("id");if(d&&d==s.data("id")){if(t(".popover").remove(),"undefined"!=typeof l[r])return a(l[r],i,n);o=t.ajax({url:PURE.ajax_url,type:"get",dataType:"html",data:{id:r,action:"get_user"},success:function(t){return l[r]=t,a(t,i,n)}})}else{if(d=s.data("id"),"undefined"!=typeof l[r])return a(l[r],i,n);o=t.ajax({url:PURE.ajax_url,type:"get",dataType:"html",data:{id:r,action:"get_user"},success:function(t){return l[r]=t,a(t,i,n)}})}})}(jQuery),jQuery(".tabBox").slide({mainCell:".bd ul",titCell:".supernice li",effect:"left",triggerTime:300,autoPlay:!0}),jQuery(".widget_books").slide({mainCell:"ul",effect:"left",triggerTime:300,autoPlay:!1}),jQuery(".focusBox").slide({mainCell:".pic",effect:"fold",autoPlay:!0,delayTime:600,trigger:"click"}),+function(t){function a(){var t='<div class="overlay overlay--dark"><button class="overlayclose-btn button--close" data-action="overlay-close">×</button>';t+='<div class="overlay-dialog"><h3 class="overlay-title">绑定手机号码</h3><div class="overlay-content"><form id="user-phone-add" class="phone-form"><p class="user-info-message"></p><p><label>手机号</label><input id="user-phone-number" name="user_phone" value="" type="text"><button class="button--sendMessage">发送验证码</button></p><p><label>验证码</label><input id="creditnum" name="creditnum" value="" type="text"></p><p><label></label><input value="提交" type="submit"></p></form></div></div>',t+="</div>",n.append(t)}function e(t){return 0==o?(t.attr("disabled",!1),t.html("发送验证码"),void(o=60)):(t.attr("disabled",!0),t.html("重新发送("+o+")"),o--,void setTimeout(function(){e(t)},1e3))}function s(){var t='<div class="overlay overlay--dark"><button class="overlayclose-btn button--close" data-action="overlay-close">×</button><iframe id="top_login_frame" src="http://passport.woshipm.com/user/2popLogin.html?_protocol=http&FS=PM&ISPOP=1&REDIRECT='+window.location.href+'" width=600 height=400 scrolling="no" class="top_fc_box"></iframe></div>';n.append(t)}function i(t){var a=t.match(/[^\x00-\xff]/gi);return t.length+(null==a?0:a.length)}t(document).on("click",".commentnav a",function(){var a=t(this).attr("href"),e=t(this).parent().data("fuck"),s=t("#comment-post-"+e),i=1,n=t("#cancel-comment-reply-link");/comment-page-/i.test(a)?i=a.split(/comment-page-/i)[1].split(/(\/|#|&).*jQuery/)[0]:/cpage=/i.test(a)&&(i=a.split(/cpage=/)[1].split(/(\/|#|&).*jQuery/)[0]),n.click();var o={action:"ajax_comment_page_nav",um_post:e,um_page:i};return jQuery.post(PURE.ajax_url,o,function(a){s.html(a),t("body, html").animate({scrollTop:s.offset().top-50},1e3)}),!1});var n=t("body");t(document).on("click",'[data-action="showPhoneOAuth"]',function(t){return t.preventDefault(),a()}),t(document).on("submit","#user-phone-add",function(a){a.preventDefault();var e=t(this);if(!e.hasClass("is-active")){var s=t("#user-phone-number").val(),i=/^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/;if(!i.test(s))return t(".user-info-message").html("请输入正确的手机号。");var n=t("#creditnum").val();e.addClass("is-active"),t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:{action:"checkCreditNum",phone:s,verifyCode:n},success:function(a){console.log(a),200==a.CODE?(t(".user-info-message").html(a.RESULT.cName),t(".overlay").remove(),clearButterbar()):(t(".user-info-message").html(a.RESULT.cName),e.removeClass("is-active"))}})}});var o=60;t(document).on("click",".button--sendMessage",function(a){a.preventDefault();var s=t(this),i=t("#user-phone-number").val(),n=/^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/;return n.test(i)?(s.html("发送中..."),s.addClass("is-active"),void t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:{action:"sendMessage",phoneNum:i},success:function(a){200==a.CODE?(e(s),t(".user-info-message").html(a.RESULT.cName)):(t(".user-info-message").html(a.RESULT.cName),s.html("发送验证码"),s.removeClass("is-active"))}})):t(".user-info-message").html("请输入正确的手机号。")}),t(document).on("click",'[data-action="popLogin"]',function(t){return t.preventDefault(),s()}),t(document).on("click",'[data-action="load-user-posts"]',function(a){a.preventDefault();var e=t(this);if(!e.hasClass("is-active")){e.addClass("is-active"),n.addClass("is-loadingApp");var s=t(this).data("paged"),i=t(this).data("type");t.ajax({url:PURE.ajax_url,type:"GET",data:{action:"load_user_posts",paged:s,type:i},success:function(a){a?(e.data("paged",s+1),t(".user-bookmark").append(a)):(t(".button--loadmore").remove(),createButterbar("已全部加载")),n.removeClass("is-loadingApp"),e.removeClass("is-active")}})}}),t(document).on("click",'[data-action="load-user-comments"]',function(a){a.preventDefault();var e=t(this);if(!e.hasClass("is-active")){e.addClass("is-active");var s=t(this).data("paged");t.ajax({url:PURE.ajax_url,type:"GET",data:{action:"get_user_comments",paged:s},success:function(a){a?(e.data("paged",s+1),t(".user-comments").append(a)):(t(".button--loadmore").remove(),createButterbar("没有更多了。",!0)),e.removeClass("is-active")}})}}),t(document).on("click",'[data-action="delete_comment"]',function(a){a.preventDefault();var e=t(this),s=parseInt(t(".user-cn").html());if(!e.hasClass("is-active")){e.addClass("is-active");var i=e.data("id");t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:{id:i,action:"user_delete_comment"},success:function(a){a.status?(t("#comment-"+i).remove(),t(".user-cn").html(s-1),createButterbar("评论已删除。")):createButterbar("评论删除失败。",!0),e.removeClass("is-active")}})}}),t(document).on("click",".load-bookmark",function(a){a.preventDefault();var e=t(this);if(!e.hasClass("is-active")){e.addClass("is-active");var s=t(this).data("paged");t.ajax({url:PURE.ajax_url,type:"GET",dataType:"json",data:{paged:s,action:"get_bookmark"},success:function(a){var s=a.posts,i="";t.each(s,function(t,a){i+='<li class="bookmark-post-'+a.id+'"><a href="'+a.permalink+'">'+a.title+'</a><div class="u-floatRight meta"><time><span class="iconfont icon-time"></span>'+a.date+'</time><span class="views"><span class="iconfont icon-view"></span>阅读 '+a.views+'</span><span class="action"><span class="suusns u-cursorPointer" title="取消收藏" data-id="'+a.id+'" data-action="togglePostVote">delete</span></span></div></li>'}),t(".blockGroup--posts").append(i),e.removeClass("is-active")}})}});var r;t(".menu-item-has-children").hover(function(){var a=t(this),e=a.find(".sub-menu");return e.hasClass("is-active")?clearTimeout(r):(t(".sub-menu").removeClass("is-active"),e.addClass("is-active"),void(e&&clearTimeout(r)))},function(){var a=t(this),e=a.find(".sub-menu");r=setTimeout(function(){e.removeClass("is-active")},500)}),t(document).on("click",".user-admin-menu",function(a){var e=t(this),s=e.find(".user-top-nav");s.hasClass("is-active")?s.removeClass("is-active"):s.addClass("is-active")}),t(".user-avatar").hover(function(){var a=t(this),e=a.find(".user-top-nav");return e.hasClass("is-active")?clearTimeout(r):(e.addClass("is-active"),void(e&&clearTimeout(r)))},function(){var a=t(this),e=a.find(".user-top-nav");r=setTimeout(function(){e.removeClass("is-active")},500)}),t(document).on("blur",".menu-item",function(){var a=t(this),e=a.find(".sub-menu");e.removeClass("is-active")}),t(document).on("click",".button--cancelsubauthor",function(a){a.preventDefault();var e=t(this),s=e.data("id");e.hasClass("is-active")||(e.addClass("is-active"),n.addClass("is-loadingApp"),t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:{id:s,action:"cancelsubauthor"},success:function(a){200==a.CODE&&(t(".user-"+s).remove(),n.removeClass("is-loadingApp"))}}))}),t(window).on("scroll",function(){var a=t(this).scrollTop();a>200?t(".back2top").addClass("is-active"):t(".back2top").removeClass("is-active")}),t(document).on("click",".back2top",function(){t("html,body").animate({scrollTop:0},800)}),t(document).on("click",".button--toggleAuthor",function(a){a.preventDefault();var e=t(this),i=e.data("id"),o=e.data("action"),r=e.find(".text");return"showLoginForm"==o?s():(n.addClass("is-loadingApp"),void t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:{id:i,action:o},success:function(t){"cancelsubauthor"==o?(e.removeClass("is-active"),e.data("action","subauthor"),r.html("订阅作者"),createButterbar("取消订阅成功")):(e.addClass("is-active"),e.data("action","cancelsubauthor"),r.html("取消订阅"),createButterbar("订阅成功")),n.removeClass("is-loadingApp")}}))}),t(document).on("click",'[data-action="userRec"]',function(a){a.preventDefault();var e=t(this),s=e.data("id"),i='<div class="overlay overlay--dark"><button class="overlayclose-btn button--close" data-action="overlay-close">×</button>';i+='<div class="overlay-dialog"><h3 class="overlay-title">推荐用户</h3><div class="overlay-content"><form class="rec-user-form phone-form"><p class="user-info-message"></p><p><label>推荐语</label><textarea class="overlay--textarea" name="message"></textarea></p><p><label></label><input name="id" value="'+s+'" type="hidden"><input value="提交" type="submit"></p></form></div></div>',n.append(i)}),t(document).on("submit",".rec-user-form",function(a){a.preventDefault();var e=t(this),s=e.data("id");if(!e.hasClass("is-active")){e.addClass("is-active"),n.addClass("is-loadingApp");var i=e.serialize()+"&action=recUser";t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:i,success:function(a){n.removeClass("is-loadingApp"),t(".user-"+s).remove(),createButterbar("推荐成功"),t(".overlay").remove()}})}}),t(document).on("click",'[data-action="cancleUserRec"]',function(a){a.preventDefault();var e=t(this),s=e.data("id");n.addClass("is-loadingApp");var i={action:"cancelRecUser",id:s};t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:i,success:function(a){n.removeClass("is-loadingApp"),t(".user-"+s).remove(),createButterbar("取消推荐成功")}})}),t(document).on("submit",".tixian-form",function(a){a.preventDefault();var e=t(this),s=t(this).serialize()+"&action=tixian";n.addClass("is-loadingApp"),t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:s,success:function(t){n.removeClass("is-loadingApp"),createButterbar("申请提现成功"),e.remove(),200!==t.CODE&&e.remove()}})}),t(document).on("click",".button--subtag",function(a){a.preventDefault();var e=t(this).data("id"),s=t(this).data("action"),i=t(this),o=i.find(".text");
n.addClass("is-loadingApp"),t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:{id:e,action:s},success:function(t){n.removeClass("is-loadingApp"),"subtag"==s?(o.html("取消订阅"),i.data("action","cancelSubTag"),i.addClass("is-active"),createButterbar("订阅成功")):(o.html("订阅标签"),i.data("action","subtag"),i.removeClass("is-active"),createButterbar("取消成功"))}})}),t(document).on("click",".cancelSubTag",function(a){a.preventDefault();var e=t(this).data("id");n.addClass("is-loadingApp"),t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:{id:e,action:"cancelSubTag"},success:function(a){return n.removeClass("is-loadingApp"),200==a.CODE?t(".tag-"+e).remove():void createButterbar(a.CODE,!0)}})}),t(document).on("click",".load-more-bookmarks",function(a){a.preventDefault();var e=t(this);if(!e.hasClass("is-active")){e.addClass("is-active");var s=e.data("paged");t.ajax({url:PURE.ajax_url,type:"GET",data:{paged:s,action:"get_bookmark_posts"},success:function(a){a&&(t(".user-bookmark").append(a),s+1>e.data("total")?(e.remove(),createButterbar("已全部加载")):e.data("paged",s+1),e.removeClass("is-active"))}})}});var l=t(".bigfa-ajax-wrapper").html(),c="",d="",u="",p="";t(document).on("click",".load-hot-questions",function(a){a.preventDefault();var e=t(this);return!e.hasClass("current")&&(t(".index-nav span").removeClass("current"),e.addClass("current"),d?t(".bigfa-ajax-wrapper").html(d):(n.addClass("is-loadingApp"),p&&p.abort(),p=t.ajax({url:PURE.ajax_url,type:"get",data:{action:"get_home_questions"},success:function(a){d=a,t(".bigfa-ajax-wrapper").html(a),n.removeClass("is-loadingApp")}}),void 0))}),t(document).on("click",'[data-action="load-hot-posts"]',function(a){a.preventDefault();var e=t(this),s=e.data("paged");return!e.hasClass("current")&&(e.addClass("current"),n.addClass("is-loadingApp"),p&&p.abort(),void(p=t.ajax({url:PURE.ajax_url,type:"get",data:{action:"get_posts",paged:s,hot:!0,orderby:e.data("orderby")},success:function(a){e.remove(),t(".bigfa-ajax-wrapper").append(a),c=t(".bigfa-ajax-wrapper").html(),n.removeClass("is-loadingApp")}})))}),t(document).on("click",'[data-action="toggleTermVote"]',function(a){a.preventDefault();var e=t(this),s=e.data("id"),i=e.data("action-value");return e.parent().hasClass("is-active")?createButterbar("请勿重复点击。",!0):(e.parent().addClass("is-active"),e.addClass("is-active"),n.addClass("is-loadingApp"),void t.ajax({url:PURE.restapi+"v1/topic/"+s+"/"+i,type:"POST",dataType:"json",success:function(t){e.find("span").html(t.payload.value),"like"==i?createButterbar("老哥，稳啊。"):createButterbar("骂的好，要改进。"),n.removeClass("is-loadingApp")}}))}),t(document).on("click",".load-new-posts",function(a){a.preventDefault();var e=t(this);return!e.hasClass("current")&&(p&&p.abort(),t(".index-nav span").removeClass("current"),e.addClass("current"),void t(".bigfa-ajax-wrapper").html(l))}),jQuery.fn.simulateClick=function(){return this.each(function(){if("createEvent"in document){var t=this.ownerDocument,a=t.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,t.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null),this.dispatchEvent(a)}else this.click()})},t(document).on("click",".loadingMySub",function(a){a.preventDefault();var e=t(this);return!e.hasClass("current")&&(e.addClass("current"),n.addClass("is-loadingApp"),p&&p.abort(),void(p=t.ajax({url:PURE.ajax_url,type:"get",data:{action:"get_my_posts",paged:e.data("paged")},success:function(a){e.remove(),t(".bigfa-ajax-wrapper").append(a),u=t(".bigfa-ajax-wrapper").html(),n.removeClass("is-loadingApp")}})))}),t(document).on("click",".mySub",function(a){a.preventDefault();var e=t(this);return!e.hasClass("current")&&(t(".index-nav span").removeClass("current"),e.addClass("current"),u?t(".bigfa-ajax-wrapper").html(u):(n.addClass("is-loadingApp"),p&&p.abort(),p=t.ajax({url:PURE.ajax_url,type:"get",data:{orderby:"comment_count",action:"get_my_posts"},success:function(a){u=a?a:'<div class="tag-list-empety"><div class="u-textAlignCenter"><span class="iconfont icon-empty"></span><p>您的订阅列表为空。</p></div></div>',t(".bigfa-ajax-wrapper").html(u),n.removeClass("is-loadingApp")}}),void 0))}),t(document).on("click",".load-hot-posts",function(a){a.preventDefault();var e=t(this);return!e.hasClass("current")&&(t(".index-nav span").removeClass("current"),e.addClass("current"),c?t(".bigfa-ajax-wrapper").html(c):(n.addClass("is-loadingApp"),p&&p.abort(),p=t.ajax({url:PURE.ajax_url,type:"get",data:{orderby:e.data("orderby"),action:"get_posts",hot:!0},success:function(a){c=a,t(".bigfa-ajax-wrapper").html(a),n.removeClass("is-loadingApp")}}),void 0))});var v="";t(document).on("click",".uc-tab-item",function(a){a.preventDefault();var e=t(this),s=e.data("type");e.hasClass("current")||(t(".uc-tab-item").removeClass("current"),e.addClass("current"),"system"==s?(t(".pm-notice-content").removeClass("u-hide"),t(".wen-notice-content").addClass("u-hide")):(v||t.ajax({url:PURE.restapi+"v1/messages/wen",type:"GET",success:function(a){"true"==a.success&&(v=a.payload,t(".wen-notice-content").html(a.payload))}}),t(".pm-notice-content").addClass("u-hide"),t(".wen-notice-content").removeClass("u-hide")))}),t(document).on("click",'[data-action="togglePostVote"]',function(a){a.preventDefault();var e=t(this).data("id"),s=t(this),i=s.find(".count"),n=parseInt(i.html()),o=t(".button-post-"+e);t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:{id:e,action:"bookmark"},success:function(t){s.hasClass("is-active")?(o.removeClass("is-active"),i.html(n-1),createButterbar("取消收藏成功")):(o.addClass("is-active"),i.html(n+1),createButterbar("收藏成功"))}})}),t(document).on("click",".suusns",function(a){a.preventDefault();var e=t(this),s=parseInt(t(".user-bookmark-count").html());if(!e.hasClass("is-active")){e.addClass("is-active");var i=e.data("id");t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:{id:i,action:"bookmark"},success:function(a){t(".bookmark-post-"+i).remove(),createButterbar("取消收藏成功"),t(".user-bookmark-count").html(s-1)}})}});var m=t(".bigfa-ajax-wrapper").html(),h="",f="",g="";t(document).on("click",".load-user-posts",function(a){a.preventDefault();var e=t(this);return!e.hasClass("current")&&(t(".author-page-nav span").removeClass("current"),e.addClass("current"),void t(".bigfa-ajax-wrapper").html(m))}),t(document).on("click",".show-s .doshow",function(a){a.preventDefault();var e=t(".my-smilies");e.hasClass("is-active")?e.removeClass("is-active"):e.addClass("is-active")}),t(document).on("click",'[data-action="addSmily"]',function(a){a.preventDefault();var e,s=jQuery(this).parent().data("id"),i=" "+jQuery(this).data("smilies")+" ";if(!document.getElementsByClassName("textarea-"+s)[0]||"textarea"!=document.getElementsByClassName("textarea-"+s)[0].type)return!1;if(e=document.getElementsByClassName("textarea-"+s)[0],document.selection)e.focus(),sel=document.selection.createRange(),sel.text=i,e.focus();else if(e.selectionStart||"0"==e.selectionStart){var n=e.selectionStart,o=e.selectionEnd,r=o;e.value=e.value.substring(0,n)+i+e.value.substring(o,e.value.length),r+=i.length,e.focus(),e.selectionStart=r,e.selectionEnd=r}else e.value+=i,e.focus();return t(".my-smilies").removeClass("is-active"),!1}),t(document).on("click",".load-user-answer",function(a){a.preventDefault();var e=t(this),s=e.data("id");return!e.hasClass("current")&&(t(".author-page-nav span").removeClass("current"),e.addClass("current"),f?t(".bigfa-ajax-wrapper").html(f):(n.addClass("is-loadingApp"),void t.ajax({url:PURE.ajax_url,type:"GET",data:{id:s,action:"get_user_answer"},success:function(a){f=a,t(".bigfa-ajax-wrapper").html(a),n.removeClass("is-loadingApp")}})))}),t(document).on("submit","#user-info-update",function(a){a.preventDefault();var e=t(this);if(i(e.find("textarea").val())>60)return createButterbar("个人资料过长",!0);if(i(e.find('input[name="nickname"]').val())>10)return createButterbar("昵称过长",!0);if(i(e.find('input[name="user_company"]').val())>15)return createButterbar("公司名过长",!0);if(!e.hasClass("is-active")){e.addClass("is-active");var s=e.serialize()+"&action=update_user_info";t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:s,success:function(t){(t.code=200)?createButterbar("资料更新成功"):createButterbar(t.message,!0),e.removeClass("is-active")}})}}),t(document).on("submit","#update-user-password",function(a){a.preventDefault();var e=t(this);if(!e.hasClass("is-active")){e.addClass("is-active");var s=e.serialize()+"&action=update_user_password",i=t(".old-pass").val(),n=t(".new-pass").val(),o=t(".re-pass").val();return i&&n&&o?n!=o?createButterbar("密码不一致，请重新确认"):i==n?createButterbar("新旧密码不能一样"):void t.ajax({url:PURE.ajax_url,type:"POST",dataType:"json",data:s,success:function(t){(t.code=500)?createButterbar(t.message,!0):createButterbar("密码修改成功。"),e.removeClass("is-active")}}):createButterbar("密码不能为空",!0)}}),t(document).on("click",".load-user-comment",function(a){a.preventDefault();var e=t(this),s=e.data("id");if(!e.hasClass("current")){if(t(".author-page-nav span").removeClass("current"),e.addClass("current"),g)return t(".bigfa-ajax-wrapper").html(g);n.addClass("is-loadingApp"),t.ajax({url:PURE.ajax_url,type:"GET",data:{id:s,action:"get_user_comment"},success:function(a){g='<ul class="user-comments">'+a+"</ul>",t(".bigfa-ajax-wrapper").html(g),n.removeClass("is-loadingApp")}})}}),t(document).on("click",".load-user-question",function(a){a.preventDefault();var e=t(this),s=e.data("id");return!e.hasClass("current")&&(t(".author-page-nav span").removeClass("current"),e.addClass("current"),h?t(".bigfa-ajax-wrapper").html(h):(n.addClass("is-loadingApp"),void t.ajax({url:PURE.ajax_url,type:"GET",data:{id:s,action:"get_user_question"},success:function(a){h=a,t(".bigfa-ajax-wrapper").html(a),n.removeClass("is-loadingApp")}})))}),PURE.is_singular&&t.ajax({url:PURE.restapi+"v1/post/"+PURE.id+"/view",type:"POST",headers:{"X-WP-Nonce":PURE.nonce},dataType:"json",success:function(t){}}),t(document).on("click",".term-save",function(a){a.preventDefault();var e=t(this),s=e.data("id");if(e.hasClass("is-active"))return!1;var i=e.prev().val();e.addClass("is-active"),n.addClass("is-loadingApp"),t.ajax({url:PURE.ajax_url,type:"GET",data:{id:s,action:"set_term_img",value:i},success:function(t){createButterbar("成功"),n.removeClass("is-loadingApp")}})}),t(document).on("click",".load-more-users",function(a){a.preventDefault();var e=t(this),s=e.data("paged"),i={action:"get_rec_users",paged:s};t.ajax({url:PURE.ajax_url,type:"GET",data:i,success:function(a){a?(t(".user-list-all").append(a),e.data("paged",s+1),t("table").tablesort().data("tablesort")):e.remove()}})}),t(document).on("click",'[data-action="add-nav-item"]',function(a){a.preventDefault();var e='<li class="list-item list-item--compact"><div class="navItemEditor u-inlineBlock inputGroup"><input class="textInput textInput--narrow u-padding0 textInput--underlined list-itemInput list-itemInput--inline u-fontSize16 u-marginTop3 u-marginRight15 " placeholder="广告内容" name="ad[]" value="" type="text"></div><button class="button button--chromeless button--delete u-baseColor--buttonNormal button--withIcon button--withSvgIcon js-removeNavItem is-touched" data-action="remove-nav-item"><span class="svgIcon svgIcon--trashcan svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="0 0 25 25"><g fill-rule="evenodd"><path d="M10.5 5h4c.3 0 .5-.2.5-.5s-.2-.5-.5-.5h-4c-.3 0-.5.2-.5.5s.2.5.5.5zm4 12.8c.3 0 .5-.3.5-.5v-5.5c0-.3-.2-.5-.5-.5s-.5.2-.5.5v5.5c0 .3.2.5.5.5z"></path><path d="M19.2 7.5c0-.8-.6-1.5-1.4-1.5H7.2c-.8 0-1.4.7-1.4 1.5 0 .732.505 1.374 1.204 1.48 0 .006-.004.012-.004.02v11c0 .6.4 1 1 1h9c.6 0 1-.4 1-1V9c0-.012-.005-.02-.006-.032.67-.145 1.206-.768 1.206-1.468zM17 20H8V9h9v11zm.8-12H7.2c-.2 0-.4-.2-.4-.5S7 7 7.2 7h10.6c.3 0 .5.2.5.5s-.3.5-.5.5z"></path><path d="M12.5 17.8c.3 0 .5-.3.5-.5v-5.5c0-.3-.2-.5-.5-.5s-.5.2-.5.5v5.5c0 .3.2.5.5.5zm-2 0c.3 0 .5-.3.5-.5v-5.5c0-.3-.2-.5-.5-.5s-.5.2-.5.5v5.5c0 .3.2.5.5.5z"></path></g></svg></span></button></li>';t(".list").append(e)}),t(document).on("click",'[data-action="remove-nav-item"]',function(a){a.preventDefault();var e=t(this);e.parent().remove()}),t(document).on("click",'[data-action="save-ad"]',function(a){a.preventDefault();var e=t(this);if(!e.hasClass("is-active")){e.addClass("is-active");var s=t(".form").serialize()+"&action=add_ad";t.ajax({url:PURE.ajax_url,type:"POST",data:s,success:function(t){createButterbar("创建成功"),e.removeClass("is-active")}})}}),t(document).on("click",'[data-action="search-report"]',function(a){var e=t(this),s=e.data("id");t.ajax({url:PURE.ajax_url,type:"POST",data:{action:"search_report",id:s},success:function(t){}})}),t(document).on("click",".show-search",function(a){t("body").hasClass("body-search")?t("body").removeClass("body-search"):t("body").addClass("body-search")}),t("table").tablesort().data("tablesort"),t("thead th.number").data("sortBy",function(t,a,e){return parseInt(a.text(),10)})}(jQuery),+function(t){function a(){var a=t(window).scrollTop(),s=t(window).height();if(Math.abs(a-e)<20)return 0;var i=0;a-e>0?i=1:a-e<0&&(i=2);t(window).scrollTop()+t(window).height();e>-1&&t(".post-article").each(function(){var e=t(this).attr("posturl"),n=t(this).find(".entry-header").find(".post-title").text(),o=t(this).offset().top,r=o+t(this).outerHeight();if(1==i){if(o>a&&o<a+s){if(window.location.href!=e){var l={title:n,url:window.location.href};window.history.pushState(l,document.title,e),document.title=n}t(".post-article").removeClass("is-showed"),t(this).addClass("is-showed")}}else if(2==i&&r<a+s&&r>a+2*s/3){if(window.location.href!=e){var l={title:n,url:window.location.href};window.history.pushState(l,document.title,e),document.title=n}t(".post-article").removeClass("is-showed"),t(this).addClass("is-showed")}}),e=a}var e=(t("body"),-1);window.invisiblezone=a}(jQuery),+function(t){function a(a){t.ajax({url:PURE.ajax_url,type:"GET",dataType:"json",data:{action:"check_trade",trade_id:a},success:function(a){200==a.CODE?a.RESULT.ispay&&(t(".wpd-overlay-body").html(i),clearInterval(s)):500==a.status&&(clearInterval(s),alert(a.message))}})}function e(){clearInterval(s),t(".overlay").remove()}var s;t(document).on("click",".button--pay",function(a){var e=t(this),s=e.data("post-id"),i=t("#article-avatar-"+s+" .avatar").attr("src"),n=e.data("author"),o="您的赞赏，是对我创作的最大鼓励。",r='<div class="overlay overlay--dark"><div class="wpd-dialog"><button class="wpd-btn-close" data-action="overlay-close">×</button><div class="wpd-overlay-body"><header class="wpd-header"><img class="wpd-avatar" src="'+i+'"><h3 class="wpd-title">'+o+'</h3></header><div class="wpd-payway u-textAlignLeft"><h5 class="wpd-payway-title">选择支付金额</h5><label class="demo--label"><input class="demo--radio" type="radio" name="paycount" value="1" checked=true><span class="demo--radioInput"></span>1元</label><label class="demo--label"><input class="demo--radio" type="radio" name="paycount" value="2"><span class="demo--radioInput"></span>2元</label><label class="demo--label"><input class="demo--radio" type="radio" name="paycount" value="5"><span class="demo--radioInput"></span>5元</label></div><div class="wpd-payway u-textAlignLeft"><h5 class="wpd-payway-title">选择支付方式</h5><label class="demo--label"><input class="demo--radio" type="radio" name="payway" value="wechat" checked=true><span class="demo--radioInput"></span>微信</label><label class="demo--label"><input class="demo--radio" type="radio" name="payway" value="alipay"><span class="demo--radioInput"></span>支付宝</label></div><div class="wpd-inputs u-textAlignLeft"><div class="wpd-input-item message"><textarea id="reward_message" name="message" class="wpd-input-textarea" placeholder="给Ta留言"></textarea></div></div><input name="postid" type="hidden" value="'+s+'"><input name="authorid" type="hidden" value="'+n+'"><div class="overlay-actions buttonSet"><div class="buttonSet buttonSet--vertical"><button class="wpd-btn-confirm" data-action="pay"><span class="button-label js-buttonLabel">立即支付</span></button><div class="wpd-overlay-notice">注：打赏的收益归作者，非平台</div></div></div></div></div></div>';t("body").append(r)});var i='<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1" width="80" height="80" viewBox="0 0 64 64"><g class="transform-group"><g transform="scale(0.0625, 0.0625)"><path d="M925.030941 337.564156c-22.537296-53.283554-54.797024-101.132328-95.882767-142.218072-41.084721-41.085744-88.934518-73.345472-142.218072-95.881744-55.17667-23.337521-113.7763-35.171034-174.170808-35.171034S393.764132 76.126818 338.588485 99.464339c-53.283554 22.536272-101.132328 54.796-142.218072 95.881744s-73.345472 88.934518-95.881744 142.218072c-23.337521 55.175647-35.171034 113.775276-35.171034 174.170808 0 60.395532 11.83249 118.995161 35.171034 174.170808 22.536272 53.283554 54.796 101.132328 95.881744 142.218072 41.085744 41.084721 88.934518 73.344448 142.218072 95.881744 55.175647 23.337521 113.775276 35.170011 174.170808 35.170011s118.994138-11.83249 174.170808-35.170011c53.28253-22.537296 101.132328-54.797024 142.218072-95.881744 41.085744-41.085744 73.345472-88.934518 95.882767-142.218072 23.337521-55.175647 35.170011-113.775276 35.170011-174.170808C960.200952 451.339432 948.367439 392.739802 925.030941 337.564156zM512.759293 918.243351c-224.149083 0-406.508387-182.359304-406.508387-406.508387s182.359304-406.508387 406.508387-406.508387c224.150106 0 406.509411 182.359304 406.509411 406.508387S736.909399 918.243351 512.759293 918.243351zM621.354594 281.552467l-72.883961 134.291542c-19.436678 36.393885-31.323403 60.584843-35.666314 72.573899l-1.24127 0c-12.822027-29.153994-49.002041-98.107435-108.550275-206.865441l-68.541049 0 127.46916 218.96092L357.423459 500.513388l0 48.381917 122.507148 0 0 66.680678L357.423459 615.575983l0 49.003064 122.507148 0 0 97.074919 60.787458 0 0-97.074919 118.166283 0 0-49.003064L540.717042 615.575983l0-66.680678 118.166283 0 0-48.381917-101.416807 0 128.708384-218.96092L621.354594 281.552467z" fill="#272636"></path></g></g></svg><p>报告土豪，您已打赏成功。</p><p class="wpd-overlay-notice">注：打赏数据显示有延迟</p>';t(document).on("click",'[data-action="overlay-close"]',function(t){e()}),window.check_trade=a,t(document).on("click",'[data-action="pay"]',function(a){var n=t('input[name="paycount"]:checked').val(),o=t("#reward_message").val(),r=t('input[name="payway"]:checked').val(),l=t('input[name="authorid"]').val(),c=t('input[name="postid"]').val();if(o.length>60)return alert("留言内容必须小于30字。");if(!t.isNumeric(n)||parseFloat(n)<1)return alert("金额不能小于1");if(!t(this).hasClass("is-active"))if(t(this).addClass("is-active").html("loading"),"alipay"==r){var d="http://api.woshipm.com/reward/aliPcPay.html?authorId="+l+"&articleId="+c+"&totalFee="+n+"&payType=1&platType=1&source=1&message="+o+"&COMMON_ACCESS_TOKEN="+PURE.token+"&COMMON_ACCESS_TOKEN_SECRET="+PURE.secret;window.open(d),t(".wpd-overlay-body").html(i),clearInterval(s)}else t.ajax({url:PURE.ajax_url,type:"GET",dataType:"json",data:{action:"donation_qrcode",count:n,author:l,postid:c,type:r,message:o},success:function(a){if(200!=a.CODE)alert("输入内容有误，重新输入。"),e();else{var i="<h4>微信扫码支付</h4><p>打赏金额：<span>"+n+' 元</span></p><img width=300 height=300 src="http://qr.liantu.com/api.php?text='+a.RESULT.code_url+'"></div>';t(".wpd-overlay-body").html(i),window.doooo_trade_id=a.RESULT.orderNo,s=setInterval("check_trade(doooo_trade_id)",1e3)}}})})}(jQuery);